<VirtualHost *:80>
    # Server configuration
    ServerName localhost
    DocumentRoot /var/www/html/swd-corkstay
    
    # Directory configuration for the application root
    <Directory "/var/www/html/swd-corkstay">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
        
        # Set default index files
        DirectoryIndex login.php index.php index.html
        
        # Enable PHP processing
        <FilesMatch \.php$>
            SetHandler application/x-httpd-php
        </FilesMatch>
    </Directory>
    
    # Security headers
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    
    # Static assets caching for better performance
    <Directory "/var/www/html/swd-corkstay/css">
        <FilesMatch "\.(css|js|png|jpg|jpeg|gif|ico|svg)$">
            ExpiresActive On
            ExpiresDefault "access plus 1 month"
        </FilesMatch>
    </Directory>
    
    <Directory "/var/www/html/swd-corkstay/properties">
        <FilesMatch "\.(png|jpg|jpeg|gif|ico|svg)$">
            ExpiresActive On
            ExpiresDefault "access plus 1 month"
        </FilesMatch>
    </Directory>
    
    # Prevent access to sensitive files
    <FilesMatch "(\.env|\.sql|\.git|\.gitignore|\.dockerignore|Dockerfile|README\.md)$">
        Require all denied
    </FilesMatch>
    
    # Custom error pages (optional)
    ErrorDocument 404 /404.html
    ErrorDocument 500 /500.html
    
    # Logging
    ErrorLog /var/log/apache2/corkstay_error.log
    CustomLog /var/log/apache2/corkstay_access.log combined
    
    # Enable mod_rewrite (for future use if needed)
    RewriteEngine On
    
    # Optional: Redirect root to login page
    RewriteRule ^/?$ /login.php [R=302,L]
    
</VirtualHost>
